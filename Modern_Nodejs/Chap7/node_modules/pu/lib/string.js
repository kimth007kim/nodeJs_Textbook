"use strict";

const fold = exports.fold = function(str) {
	return str.replace(/[\uff01-\uff5e]/g, c => String.fromCharCode(c.charCodeAt(0) - 65248)).replace(/\u3000/g, " ");
};

const regex = exports.regex = function(str) {
	return str.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
};

const html = exports.html = function(str) {
	var map = {
		"&": "&amp;",
		"<": "&lt;",
		">": "&gt;",
		"\"": "&quot;",
		"'": "&#039;"
	};
	return str.replace(/[&<>"']/g, c => map[c]);
};

const replace = exports.replace = function(str, map) {
	var re = new RegExp(Object.keys(map).sort((a, b) => b.length - a.length).map(x => regex(x)).join("|"), "g");
	return str.replace(re, x => map[x]);
};